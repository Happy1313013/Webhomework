什N是W站_l框架(Web framework)？

1990年Tim Berners-Leel明全球YW之後，就_始有了BW的需求，早期最L行的方法是使用Perl CGI，在Perl程式中，出HTML热荩例如以下是一蔚挠灯鳎

#!/usr/bin/perl

open(FILE, "count.txt");
$num = <FILE>; $num++;
close (FILE);

open(WRITETO, ">count.txt");
print WRITETO "$num";
close (WRITETO);

print <<PRINTAREA;
content-type:text/html\n\n
<style>
<!--
body {background-color: black; line-height:1;
margin-top: 0cm;
margin-left: 0cm;
margin-right: 0cm}
-->
</style>
<body><center>
<b><font size=1 color=white>
$num</font></b>
PRINTAREA
x者可以lF，@拥姆绞皆HTML热锥档那r，@著十分不容易So及x。大s在2000年左右，PHP、ASP等以影(Template)橹鞯某淌秸Z言出F了，同r期搭配著P式Y料烊MySQL一起流行起怼＿@N法c上述的Perl CGI恰巧相反，是在HTML影逯惹度氤淌胶SQL指令，例如以下是一PHP&MySQL程式，其中用<?php ... ?>括起淼牟糠荩就是PHP程式：

<?php
  $db = mysql_connect("localhost", "root", "password");
  mysql_query("SET NAMES 'utf8'");
  mysql_select_db($SERVER['db']);
?>
<html>
  <?php
    $sql="select * from news where Class='1' or Class='3' order by CTDate desc limit 0,5";
    $result= mysql_query($sql);
    while ( $arr=mysql_fetch_array($result) ) {
      echo <<<NEWSEND
        <div class="box">
          <span class="box-title-1"> <b>【$arr[Title]】</b> $arr[CTDate] </span>
          <div class="box-content">
            $arr[Text]
          </div>
        </div>
      NEWSEND;
    }
  ?>
</html>
@N用法非常容易使用。特e像是^、部落格(Blog)、热莨芾硐到y(CMS)、Wiki@系y，重c主要在Y料的保存和@示，砍兜难}s商I不多，特em合@拥拈_l方式。程式只是Y料煜到y的糖衣介面，不需要MVC架、不需要面c程式分_、不需要物件向技g，也可以_l的很好。

但是近年黼S著Web 2.0和端L潮碓碓蕉嗟Web用程式_l需求，W站w的模_始增加，需要加入更多的商I和功能，@拥拈_l方式，е铝苏０傅慕Y得十分混s，不利於F合作_l。要接手So@拥木W站，常常不知道如何x及修改起，因樗有的商者cHTML混s在一起，不同人_l就有不同的程式架，缺乏程式文件是常有的事情，也不容易M行y。

於是我有了Web_l框架的需求，引入完整的物件向^念和技g。而所^的框架就是制定好了一套和T例，_l者在架下磉M行_l。

S基百科是@佣x的：「w框架(Software framework)」是榱F某I界驶蛲瓿商囟基本任盏能wM件，也指榱F某wM件r，提供所要求之基A功能的wa品。框架的功能似於基AO施，c具w的w用oP，但是提供KF最榛A的w架和w系。w_l者通常依特定的框架F更檠}s的商I\用和I者。@拥能w用可以在支持同一N框架的w系y中\行。
非常多的Web框架都`一叫做MVC的w架O模式，④w分成三部分：

Model物件包b了Y料c商I，例如操作Y料
View表示使用者介面，@示及表危可惹Ruby程式的HTML
Controller①Y料送M送出Model，理耐饨(也就是g[器)淼HTTP Request求，cModel互俞彷出View(也就是HTML)
MVC diagram

@D示中的绦胁襟E是：

g[器l出HTTP request求
理的Controller操作ModelY料
Model存取Y料
Controller⒌玫降馁Y料joView影
回髯钺岬HTML成品og[器
透^MVC模式，我可以有系y的M程式a，K且分x商I和使用者介面，前端c後端_l者可以立作I，也程式a有著一致性的Y，n案位置清楚，@些T例Web框架都湍阆牒昧恕Ｓ辛顺淌揭，也就比^容易So_l了。

也有不`MVC的小型Web框架，通常Q做Micro-framework，例如Sinatra，我在Ruby\囊妙一章中谓榻B@不同思S的Web_l框架。
桌面w的MVC和Web MVC有一些差，主要是因Web MVC中的View]有k法透^Observer模式磉M行更新。有d趣的朋友可以⒖Model View Controller: History, theory and usage@篇文章。
Web框架通常包括以下功能，

ORM

ORM(Object-relational mapping)可以用物件向Z法聿僮麝P式Y料欤容易使用、撰a十分有效率，不需要撰繁的SQLZ法，也增加了程式aSo性。例如：

SELECT * FROM orders, users WHERE orders.user_id = users.id AND orders.status = "Paid" LIMIT 5 ORDER BY orders.created_at;
@一段SQL⑹觯在Rails中的Z法是：

Order.where(:status => "paid").includes(:user).limit(5).order("created_at")
URL路由

不同於PHP直接使用n案目YW址，例如W址是/foo/bar，就得有n案在/foo/bar.php下。@N一σ坏姆绞诫m然直X，但是s大大限制了程式架和_l，W址也常常不漂亮，不利於SEO(Search engine optimization)。

使用Web框架t]有@N}，你碛凶畲蟮性，您可以指定任意URL到任一Controller的幼鳎跟n案位置是oP的。

此外，Web框架也附Я朔浅６嚅_lWeb用到的函式欤例如Template、Email、Session、快取、JavaScript/Ajax、y等等。@也是槭颤N使用Web框架可以大大加速W站０傅拈_lr程，因殚_lWeb用程式用到的功能大部分都冉了，我不需要重}_l子。

什N是Ruby on Rails？

Ruby on Rails(官方QRails，RoR非官方Q)是使用Ruby@套_放原始a(裼MIT授)、物件向程式Z言所_l的Web_l框架，主要用於_lY料炀W站用程式。Rails是一套I的_l框架，裼昧MVC(Model-View-Control)模式、冉ㄖг卧y和整合y、支援Ajax和RESTful介面、ORMC制，以及支援各N最新的I界氏袷HTML5、JQuery等等功能。它的l明人是David Heinemeier Hanson(DHH)，DHH是2004年Rails37signals商Ia品中立出沓殚_源０浮

它的O目耸侵灰_l者熟悉它的T例，它就可以W站_l的非常容易。而相於其他程式Z言和框架，Rails可以你用更少的程式a_成更多的功能，它甚至W站_l得更有趣。

Rails的哲W包括以下指гt：

不要重}自己(DRY: Don’t Repeat Yourself) C 撰出重}的程式a是件氖
T例凫对O定(Convention Over Configuration) C RailsAO各N好的O定跟T例，而不是要求你O定每一到O定n中。
REST是W站用程式的最佳模式 C 使用Resources和实HTTP verbs(釉~)斫M你的用程式是最快的方式(我在路揭徽略介B@大的O)
楹芜xRails？

@是一_l框架的r代，熟悉_l框架的人，可以很快的完成任找约笆煜ぞW站程式的架。而各N程式Z言要入T上手，其都不太困y。我J橹攸c在於你不能蚴煜ぷ鍪虑榈目蚣堋

所以，撇_程式Z言的偏好，Ruby on Rails是目前W站_l框架中做前端(提供BHTMLog[器)用伺服器最槌晒和技g先M的。它的概念也深深影了非常多其他程式Z言的後MW站_l框架，例如ASP.NET MVC、CakePHP、Grails、TurboGears、Pylons、web2py、catalyst等等(模仿是最大的恭S)。我可以用非常有效率的程式a_l出W站用程式。另外，可能你感到意外的是，它也是目前BZ言中，生B圈最樨S富的W站_l框架，相P的籍、研、公司、第三方服铡⑼焯准等等十分S富。因槭褂Rails的人当多，所以在_l上各方向都有人提供了最佳眨像是如何出好的程式a、W站安全性、W站性能、U充性、全文搜ぁ⒎峭步理等等，@是一非常活S的社群。

然，最重要的一理由，就是裼Rails後生a力暴增：新的用程式、增加新功能成容易地多。你可以用更少程式a做更多的事情，而且程式也更容易So。然，W新工具是需要rg投Y的，一_始可能]k法立刻效。但是如果你有L期的_l工作，而且W站有一定的}s性，那N一短期WRuby on Rails的投Y，L期碚f是非常值得的。

Rails 不是什N

如上所述，Rails是一打造W站用程式的_l框架，如果你只需要oB的HTML，那是^不需要用到Rails的。
Rails不是CMS(Content Management System)热莨芾硐到y。CMS是一套好的架站系y，可以你不需要程式就可以架站。市面上流行成熟的CMS系y多PHP成，例如Drupal、WordPress等。然也有用Ruby的，例如Radiant。如果@些架站系y好符合你的需求，那就不一定需要Rails。
Rails是一套W站_l框架椭你建立W站用程式，它不是程式Z言。
什N是Ruby？

Rails是一套使用Ruby_l的W站框架。如果您Ruby一o所知就一^栽MRails，恐怕不是好主意。

Ruby是一套_放原a、物件向的B直g式(interpreted)程式Z言，它有著握W、高生a力、精巧、自然的Z法。他的造者是碜匀毡镜乃杀拘泻(又名Matz)，O的`感碜造Lisp、Perl和Smalltalk，O的目的是要程式O能蚩返程式。

我看一非常蔚墓例：

str = "May Ruby be with you!"
5.times { puts str }
@的例就胃嬖V我有PRuby的三件事情了：

B分型(typing)，不需要宣告型B
每|西都是物件，包括底
使用Code Block形式的匿名函式(anonymous function)S可
我在Ruby一章介B基本的Z法，各位x者可以很快的入T。

BZ言的好

槭颤N_l伺服器端用程式，使用BZ言(Ruby、Python、PHP、Perl等)比起oBZ言(Java、C++等)有更好的菽兀

oBZ言和BZ言的差e在於，前者的敌e需要事前宣告，後者t是绦衅诓BQ定。丈希就看程式需不需要事前g@幼髁恕
著名的”人月神”一作者Fred Brooks曾f：「一程式O一天能a生的程式a行凳遣畈欢嗟模o什N程式Z言」。因此一具有表_能力的高A程式Z言，就比低A的程式Z言能完成更多功能。相^於oB程式Z言，使用更高A的B_本Z言可以椭我：

用更少程式a做更多事情，大大增加生a力
更快因客糸_l需求，敏捷_l
不^，BZ言也不是]有缺c：

绦行能是^Ρ炔簧响oBZ言的
]有g期可以z查型ee`
但是，我知道F在的X越碓娇臁⒃碓奖阋恕⑸暇W越碓饺菀住⒂w越碓蕉唷⒂驳越碓酱蟆Ａ硗猓行友b置也越碓蕉啵需要搭配的W路服招枨笠苍黾恿恕＿@些莞嬖V我有更多的w的需求，另一方面由於硬w效能的增，人力_l成本比起w的绦衅诘男能，也越碓街匾。同右程式，用BZ言绦械男能已可以_到用(例如每秒可以理50~500的HTTP求，也可以透^增加伺服器U展架)，也S用oBZ言後的绦兴俣瓤梢栽倏煲槐叮但是s需要十倍以上的rg黹_l，@件事情是不是值得呢？

在硬wY源有限的行友b置及嵌入式系y上，仍是oBZ言的天下，@一c需要更多rg才有BZ言的生存空g。
]有g期可以z查型ee`的}，也S著卧y和TDD(Test-driven development)y娱_l等敏捷最佳斩逐u降低重要性。而大部分的Bug出自於商Ie`，而不是型ee`上。

楹芜xRuby？

Ruby 是一套非常重使用性(Usability)的物件向程式Z言，非常看重程式a的可x性及So性。Matz在ORubyr，就特e考量一般人容不容易了解(他f我都是凡人，像Lisp是o神人用的)。@也是槭颤N你常常到Ruby的程式a自然又漂亮。您可以看看@份 Ruby造者Matz的Why Ruby?投影片或是Matz的演v:RubyConf 2008、RubyConf 2009、Mountain West Ruby Conference 2010，相信您更了解及喜Ruby的哲W。

Ruby也是目前做Domain-specific language(DSL)，特e是Internal DSL最槌晒Φ某淌秸Z言。透^DSL，程式不但可以碛蟹浅：玫目勺x性，也可以大幅增加生a力。成功的DSL函式炖如有：Rake建工具、RSpecy工具、Chef伺服器O定工具、Cucumber收y等。@些函式煺eO地影我w_l的想法。我相信，有更多更有趣的DSL函式斐霈F。